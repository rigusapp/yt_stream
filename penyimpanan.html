<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Upload & Convert Faststart</title>
<style>
    body { font-family: Arial; padding: 20px; }
    #status { margin-top: 20px; font-size: 18px; }
    a { font-size: 20px; }
</style>
</head>
<body>

<h2>Upload & Convert Video ke Faststart (Cloudflare R2)</h2>

<input type="file" id="videoFile"><br><br>
<button onclick="uploadVideo()">Upload & Convert</button>

<div id="status"></div>

<script>
async function uploadVideo() {
    const file = document.getElementById("videoFile").files[0];
    if (!file) {
        alert("Pilih file terlebih dahulu.");
        return;
    }

    const formData = new FormData();
    formData.append("video", file);

    document.getElementById("status").innerHTML = "Processing... ðŸš€";

    try {
        const response = await fetch("https://26dd6d56-c0d8-4b20-b07d-bae16f37a698-00-154zx0u9lm7i4.sisko.replit.dev/convert", {
            method: "POST",
            body: formData
        });

        const result = await response.json();

        if (result.status === "success") {
            document.getElementById("status").innerHTML = `
                <b>Success! ðŸŽ‰</b><br>
                <a href="${result.url}" target="_blank">Open R2 File</a>
            `;
        } else {
            document.getElementById("status").innerHTML = "Error: " + JSON.stringify(result);
        }

    } catch (err) {
        document.getElementById("status").innerHTML = "Server error: " + err;
    }
}
</script>

</body>
</html>
