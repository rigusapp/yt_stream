<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<title>YT Stream — Professional</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800&display=swap" rel="stylesheet">

<style>
/* =============================== */
/*   PREMIUM MOBILE iOS / ANDROID  */
/* =============================== */
@media (max-width: 680px){

  body{
    background:#f3f6fb;
    padding:0;
  }

  .container{
    margin:0;
    padding:22px;
    border-radius:0;
    box-shadow:none;
    border:0;
  }

  /* Header sticky style */
  .header{
    position:sticky;
    top:0;
    background:var(--card);
    padding:16px 0;
    z-index:50;
    margin-bottom:15px;
    border-bottom:1px solid #e9edf7;
  }

  .logo{
    width:54px;
    height:54px;
    font-size:22px;
    border-radius:16px;
    box-shadow:0 4px 12px rgba(0,0,0,0.12);
  }

  h1{
    font-size:20px;
  }

  .lead{
    font-size:13px;
  }

  /* Grid menjadi 1 kolom */
  .grid{
    grid-template-columns:1fr;
    gap:14px;
  }

  /* Panel mobile style */
  .panel{
    border-radius:18px;
    padding:18px;
    border:1px solid #eef1f8;
    box-shadow:0 6px 22px rgba(0,0,0,0.06);
  }

  /* Input iOS Style */
  .input, select, textarea{
    padding:14px 16px;
    font-size:15px;
    border-radius:14px;
  }

  textarea{
    min-height:120px;
  }

  label{
    margin-top:16px;
    font-size:14px;
  }

  /* Button iOS/Android style */
  .btn{
    width:100%;
    padding:15px 20px;
    font-size:16px;
    border-radius:16px;
    margin-top:10px;
  }

  .btn.ghost{
    border-radius:16px;
  }

  /* Panel preview/log full width */
  #payload,
  #log{
    font-size:12px;
    padding:12px;
  }

  .footer{
    font-size:12px;
    padding:30px 0;
  }
}

  
:root{
  --bg:#f3f6fb;
  --card:#ffffff;
  --primary:#2563eb;
  --primary-dark:#1e3a8a;
  --accent:#10b981;
  --muted:#6b7280;
  --danger:#ef4444;
  --border:#e5e9f5;
}

*{box-sizing:border-box;}

/* Background */
body{
  font-family:'Inter', system-ui, Arial;
  margin:0;
  background:var(--bg);
  color:#0f172a;
}

/* Container */
.container{
  max-width:1100px;
  margin:40px auto;
  padding:35px;
  border-radius:16px;
  background:var(--card);
  box-shadow:0 10px 40px rgba(0,0,0,0.05);
  border:1px solid var(--border);
}

/* Header */
.header{
  display:flex;
  align-items:center;
  gap:20px;
  padding-bottom:15px;
  border-bottom:1px solid #eef1f8;
  margin-bottom:25px;
}

.logo{
  width:64px;
  height:64px;
  border-radius:50%;
  background:linear-gradient(135deg,#1e40af,#2563eb,#60a5fa);
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  font-weight:800;
  font-size:26px;
  box-shadow:0 4px 15px rgba(37,99,235,0.35);
}

/* Titles */
h1{
  margin:0;
  font-size:24px;
  font-weight:800;
}

.lead{
  margin-top:6px;
  color:var(--muted);
  font-size:14px;
}

/* Grid */
.grid{
  display:grid;
  grid-template-columns:1fr 320px;
  gap:20px;
  margin-top:15px;
}

/* Panels */
.panel{
  background:#ffffff;
  padding:20px;
  border-radius:14px;
  border:1px solid var(--border);
  box-shadow:0 6px 20px rgba(0,0,0,0.03);
  transition:0.2s;
}

.panel:hover{
  box-shadow:0 8px 25px rgba(0,0,0,0.05);
}

/* Labels */
label{
  display:block;
  font-weight:600;
  margin-top:14px;
  font-size:13px;
  color:#1f2937;
}

/* Inputs */
.input, select, textarea{
  width:100%;
  padding:12px 14px;
  margin-top:6px;
  border-radius:10px;
  border:1px solid #dce3f3;
  background:white;
  font-size:14px;
  transition:0.2s;
}

.input:focus, select:focus, textarea:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(37,99,235,0.15);
  outline:none;
}

textarea{
  min-height:110px;
}

/* Buttons */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:12px 18px;
  border-radius:12px;
  font-weight:700;
  border:0;
  cursor:pointer;
  transition:0.2s;
}

.btn:hover{ transform:translateY(-1px); }

.btn:active{ transform:translateY(0); }

/* Primary */
.btn{
  background:var(--primary);
  color:white;
}

.btn:hover{
  background:var(--primary-dark);
}

/* Ghost */
.btn.ghost{
  background:white;
  border:1px solid #dbeafe;
  color:var(--primary);
}

.btn.ghost:hover{
  background:#f0f6ff;
}

/* Debug */
.debug{
  background:#0f172a;
  color:#bfe7b0;
  padding:14px;
  border-radius:10px;
  font-family:monospace;
  white-space:pre-wrap;
  display:none;
  margin-top:12px;
  font-size:13px;
}

/* Footer */
.footer{
  margin-top:20px;
  color:var(--muted);
  font-size:13px;
  text-align:center;
}
</style>

  
</head>
<body>
<div class="container">
  <div class="header">
   <div class="logo">YT</div>

    <div>
      <h1>YT Stream — Professional</h1>
      <div class="lead">Dashboard profesional untuk mengatur livestream YouTube. (RTMP & Stream Key dikirim dari dashboard)</div>
    </div>
  </div>

  <div class="grid">
    <div>
      <div class="panel">
        <label>Cloudflare Worker URL</label>
        <input id="workerUrl" class="input" placeholder="https://your-worker.workers.dev/">

        <label>RTMP Server</label>
        <input id="rtmp" class="input" value="rtmp://a.rtmp.youtube.com/live2">

<label>Tanggal & Jam Live (WIB)</label>
<input id="datetime" class="input" placeholder="Pilih tanggal & jam...">


        <label>Durasi</label>
        <select id="duration" class="input">
          <option value="1800">30 menit</option>
          <option value="3600" selected>1 Jam</option>
          <option value="7200">2 Jam</option>
          <option value="10800">3 Jam</option>
          <option value="14400">4 Jam</option>
          <option value="18000">5 Jam</option>
          <option value="21600">6 Jam</option>
          <option value="25200">7 Jam</option>
          <option value="28800">8 Jam</option>
          <option value="32400">9 Jam</option>
          <option value="36000">10 Jam</option>
          <option value="39600">11 Jam</option>
          <option value="43200">12 Jam</option>
        </select>

        <label>Video URL</label>
        <input id="video" class="input" placeholder="https://.../video.mp4">

        <label>Stream Key</label>
        <input id="streamKey" class="input" placeholder="rmfk-xxxx-xxxx-xxxx">

        <label>Title</label>
        <input id="title" class="input" placeholder="Judul Live">

        <label>Description</label>
        <textarea id="description" class="input" placeholder="Deskripsi singkat..."></textarea>

        <label>Visibility</label>
        <select id="visibility" class="input">
          <option value="public">Public</option>
          <option value="unlisted">Unlisted</option>
          <option value="private">Private</option>
        </select>

        <div style="display:flex;gap:10px;margin-top:14px">
          <button id="trigger" class="btn">Trigger Stream</button>
          <button id="clear" class="btn ghost">Clear</button>
        </div>

        <div class="meta">Catatan: Stream key dikirim bersama payload ke Worker. Jangan bagikan stream key Anda.</div>
      </div>
    </div>

    <div>
      <div class="panel">
        <h3 style="margin:0">Preview & Log</h3>
        <div class="small">Payload yang akan dikirim ke Worker:</div>
        <pre id="payload" class="debug"></pre>
        <div id="log" class="debug"></div>
      </div>

      <div style="height:12px"></div>
      <div class="panel">
        <div class="small">Quick actions</div>
        <button id="test" class="btn ghost" style="width:100%;margin-top:10px">Test connection</button>
        <div class="small meta">Use Test to verify Worker responds with 204.</div>
      </div>
    </div>
  </div>

  <div class="footer">Built for you — Professional SaaS style. Want OAuth integration with YouTube Data API? Ask me.</div>
</div>

<script>
function toISO(datetime){
  if(!datetime) return '';
  const [date, time] = datetime.split(' ');
  const [day, month, year] = date.split('/'); 
  const local = new Date(`${year}-${month}-${day}T${time}:00`);
  const utc = new Date(local.getTime() - 7*3600*1000);
  return utc.toISOString().split('.')[0] + 'Z';
}


async function postJSON(url, body){
  const res = await fetch(url, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body)});
  const text = await res.text().catch(()=>'');
  return {ok:res.ok,status:res.status,text};
}

document.getElementById('clear').onclick = ()=>{
  document.getElementById('video').value='';
  document.getElementById('streamKey').value='';
  document.getElementById('title').value='';
  document.getElementById('description').value='';
  document.getElementById('visibility').value='public';
  document.getElementById('payload').style.display='none';
  document.getElementById('log').style.display='none';
};

document.getElementById('trigger').onclick = async ()=>{
  const worker = document.getElementById('workerUrl').value.trim();
  const payload = {
    video_url: document.getElementById('video').value.trim(),
    rtmp_url: document.getElementById('rtmp').value.trim(),
    start_time: toISO(document.getElementById('datetime').value),

    duration_seconds: document.getElementById('duration').value,
    title: document.getElementById('title').value.trim(),
    description: document.getElementById('description').value.trim(),
    visibility: document.getElementById('visibility').value,
    stream_key: document.getElementById('streamKey').value.trim()
  };
  document.getElementById('payload').style.display='block';
  document.getElementById('payload').textContent = JSON.stringify(payload,null,2).replace(payload.stream_key,'*****MASKED*****');
  document.getElementById('log').style.display='block';
  document.getElementById('log').textContent = 'Sending...';
  if(!worker){ alert('Masukkan Cloudflare Worker URL'); return; }
  try{
    const r = await postJSON(worker, { event_type:'stream_trigger', client_payload: payload });
    document.getElementById('log').textContent = 'Worker response: ' + r.status + '\n' + r.text;
  }catch(e){
    document.getElementById('log').textContent = 'Error: '+e.message;
  }
};

document.getElementById('test').onclick = async ()=>{
  const worker = document.getElementById('workerUrl').value.trim();
  if(!worker){ alert('Masukkan Cloudflare Worker URL'); return; }
  try{
    const r = await fetch(worker, {method:'OPTIONS'});
    alert('Worker OPTIONS status: ' + r.status);
  }catch(e){
    alert('Worker test failed: ' + e.message);
  }
};
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <script>
flatpickr("#datetime", {
  enableTime: true,
  dateFormat: "d/m/Y H:i",
  time_24hr: true,
});
</script>

  
</body>
</html>
