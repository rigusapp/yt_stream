<!doctype html>
<html lang="id"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>YT Stream — Dashboard</title><link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.css" rel="stylesheet"><style>body{background:#071024;color:#e6eef8} .card{background:rgba(255,255,255,0.03);backdrop-filter:blur(6px)}</style></head><body class="min-h-screen flex items-center justify-center p-6"><div class="w-full max-w-6xl"><div id="loginWrap" class="fixed inset-0 flex items-center justify-center bg-black/60 z-50"><div class="card p-6 rounded-lg w-96"><h2 class="text-xl font-semibold mb-4">Sign in — YT Stream</h2><label class="text-sm">Username</label><input id="username" class="w-full p-2 rounded mt-1 mb-2" value="admin"/><label class="text-sm">Password</label><input id="password" type="password" class="w-full p-2 rounded mt-1 mb-4" value="steve123"/><div class="flex justify-end"><button id="loginBtn" class="px-4 py-2 bg-indigo-600 rounded">Login</button></div><p class="text-xs text-gray-400 mt-3">Default: admin / steve123</p><div id="loginMsg" class="text-sm text-red-400 mt-2"></div></div></div><div id="app" class="hidden"><header class="flex items-center justify-between mb-6"><div class="flex items-center gap-4"><img src="../logo.svg" alt="logo" class="w-12 h-12 rounded"/><div><h1 class="text-2xl font-bold">YT Stream</h1><p class="text-sm text-gray-300">Premium Dashboard — rigusapp/yt_stream</p></div></div><div><button id="logout" class="px-3 py-2 bg-red-600 rounded">Logout</button></div></header><main class="grid grid-cols-1 lg:grid-cols-3 gap-6"><section class="col-span-2 card p-6 rounded-lg"><h2 class="text-lg font-semibold mb-4">Jadwalkan Live</h2><div class="space-y-3"><div><label class="text-sm">Judul Video</label><input id="title" class="w-full p-2 rounded mt-1"/></div><div><label class="text-sm">Deskripsi</label><textarea id="description" class="w-full p-2 rounded" rows="3"></textarea></div><div class="grid grid-cols-2 gap-3"><div><label class="text-sm">Visibilitas</label><select id="visibility" class="w-full p-2 rounded"><option value="public">Public</option><option value="unlisted">Unlisted</option><option value="private">Private</option></select></div><div><label class="text-sm">Stream Key</label><input id="streamKey" class="w-full p-2 rounded" placeholder="paste stream key"/></div></div><div class="grid grid-cols-2 gap-3"><div><label class="text-sm">Tanggal</label><input id="date" type="date" class="w-full p-2 rounded"/></div><div><label class="text-sm">Waktu</label><input id="time" type="time" class="w-full p-2 rounded"/></div></div><div class="grid grid-cols-2 gap-3 items-end"><div><label class="text-sm">Durasi Live</label><select id="duration" class="w-full p-2 rounded"><option value="1800">30 Menit</option><option value="3600" selected>1 Jam</option><option value="7200">2 Jam</option><option value="10800">3 Jam</option><option value="14400">4 Jam</option><option value="18000">5 Jam</option><option value="21600">6 Jam</option><option value="25200">7 Jam</option><option value="28800">8 Jam</option><option value="32400">9 Jam</option><option value="36000">10 Jam</option><option value="39600">11 Jam</option><option value="43200">12 Jam</option></select></div><div class="flex items-center gap-3"><label class="inline-flex items-center gap-2"><input id="loop" type="checkbox" class="accent-indigo-500"/> Looping</label></div></div><div><label class="text-sm">Sumber Video</label><div class="mt-2 space-y-2"><label><input type="radio" name="src" value="link" checked/> Link / URL</label><label class="ml-4"><input type="radio" name="src" value="upload"/> Upload (R2 only)</label></div><div id="linkBox" class="mt-2"><input id="videoUrl" class="w-full p-2 rounded" placeholder="https://example.com/video.mp4"/></div><div id="uploadBox" class="mt-2 hidden"><input id="fileInput" type="file" accept="video/*"/><p class="text-xs text-gray-400 mt-1">Upload hanya untuk R2 edition.</p></div></div><div class="pt-3"><button id="scheduleBtn" class="px-4 py-2 bg-green-600 rounded">Jadwalkan Live</button></div></div></section><aside class="card p-4 rounded-lg"><h3 class="font-semibold mb-2">Preview & Quick Actions</h3><pre id="preview" class="bg-black/20 p-3 rounded h-44 overflow-auto text-xs"></pre><div class="mt-3 space-y-2"><button id="sendBtn" class="w-full px-3 py-2 bg-indigo-600 rounded">Send → Worker</button><button id="testBtn" class="w-full px-3 py-2 border rounded">Test Connection</button><button id="copyBtn" class="w-full px-3 py-2 border rounded">Copy Payload</button></div><h4 class="mt-4 font-semibold">Logs</h4><pre id="logs" class="bg-black/10 p-2 rounded h-36 overflow-auto text-xs"></pre></aside></main><footer class="text-center mt-6 text-sm text-gray-400">YT Stream • rigusapp/yt_stream</footer></div></div><script>const loginWrap=document.getElementById('loginWrap');const loginBtn=document.getElementById('loginBtn');const loginMsg=document.getElementById('loginMsg');const usernameInput=document.getElementById('username');const passwordInput=document.getElementById('password');const app=document.getElementById('app');loginBtn.addEventListener('click', ()=>{const u=usernameInput.value.trim();const p=passwordInput.value; if(u==='admin' && p==='steve123'){ loginWrap.style.display='none'; app.classList.remove('hidden'); writeLog('Login sukses sebagai admin'); } else { loginMsg.innerText='Login gagal — cek username/password'; }});document.getElementById('logout').addEventListener('click', ()=> location.reload());const srcRadios=document.querySelectorAll('input[name="src"]');const uploadBox=document.getElementById('uploadBox');const linkBox=document.getElementById('linkBox');srcRadios.forEach(r=> r.addEventListener('change', ()=>{ if(r.value==='upload' && r.checked){ uploadBox.classList.remove('hidden'); linkBox.classList.add('hidden'); } if(r.value==='link' && r.checked){ uploadBox.classList.add('hidden'); linkBox.classList.remove('hidden'); } }));function buildPayload(){const title=document.getElementById('title').value||'';const description=document.getElementById('description').value||'';const visibility=document.getElementById('visibility').value||'public';const date=document.getElementById('date').value;const time=document.getElementById('time').value;let start_time=null;if(date&&time){const dt=new Date(date+'T'+time);start_time=new Date(dt.getTime()-dt.getTimezoneOffset()*60000).toISOString();}const stream_key=document.getElementById('streamKey').value.trim();const rtmp='rtmp://a.rtmp.youtube.com/live2';const duration_seconds=document.getElementById('duration').value;const seamless=document.getElementById('loop').checked;const source=document.querySelector('input[name="src"]:checked').value;const video_url=source==='link'?document.getElementById('videoUrl').value.trim():'';return{title,description,visibility,start_time,stream_key,rtmp_url:rtmp,video_url,duration_seconds,seamless};}function refreshPreview(){document.getElementById('preview').innerText=JSON.stringify(buildPayload(),null,2);}document.getElementById('scheduleBtn').addEventListener('click', ()=>{refreshPreview();writeLog('Payload siap — cek preview');});document.getElementById('copyBtn').addEventListener('click', ()=>{navigator.clipboard.writeText(document.getElementById('preview').innerText);writeLog('Payload dicopy');});function writeLog(s){const l=document.getElementById('logs');l.innerText=new Date().toLocaleString()+' — '+s+'\n'+l.innerText;}document.getElementById('sendBtn').addEventListener('click', async ()=>{const payload=buildPayload();writeLog('Mengirim ke Worker (proxy) ...');try{const res=await fetch('https://ytstream-proxy.rigus-apps.workers.dev/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({event_type:'stream_trigger', client_payload: payload})});const txt=await res.text();writeLog('Worker response: ' + res.status + ' / ' + txt);}catch(e){writeLog('Koneksi gagal: ' + e.message);} });document.getElementById('testBtn').addEventListener('click', ()=>writeLog('Test connection (simulated) - OK'));</script></body></html>
